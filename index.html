<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <meta
      name="theme-color"
      media="(prefers-color-scheme: light)"
      content="#f2f2f7"
    />
    <meta
      name="theme-color"
      media="(prefers-color-scheme: dark)"
      content="#1c1c1e"
    />
    <meta name="apple-itunes-app" content="app-id=6502414968" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-title" content="Renfo" />
    <meta
      name="description"
      content="Renfo is your Renaissance Festival companion with a searchable festival map, event details, and weather at a glance."
    />
    <link rel="canonical" href="https://www.renfo.app/" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Renfo" />
    <meta property="og:title" content="Renfo - Renaissance Festival Companion" />
    <meta
      property="og:description"
      content="Explore Renaissance Festivals with Renfo: searchable locations, festival details, and forecast info in one place."
    />
    <meta property="og:url" content="https://www.renfo.app/" />
    <meta
      property="og:image"
      content="https://www.renfo.app/assets/images/renfo-banner.png"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta
      property="og:image:alt"
      content="Renfo banner with map and Renaissance Festival listings"
    />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Renfo - Renaissance Festival Companion" />
    <meta
      name="twitter:description"
      content="Explore Renaissance Festivals with Renfo: searchable locations, festival details, and forecast info in one place."
    />
    <meta
      name="twitter:image"
      content="https://www.renfo.app/assets/images/renfo-banner.png"
    />
    <meta
      name="twitter:image:alt"
      content="Renfo banner with map and Renaissance Festival listings"
    />
    <title>Renfo - Renaissance Festival Map</title>

    <!-- Favicon -->
    <link rel="icon" href="/assets/images/favicon.ico" sizes="any" />
    <link rel="icon" href="/assets/images/renfo-app-icon.png" type="image/png" />
    <link rel="apple-touch-icon" href="/assets/images/renfo-app-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />

    <link rel="stylesheet" href="/styles.css" />
    <!-- MapKit JS -->
    <script src="/config.js"></script>
    <script>
      window.__mapKitReady = false;
      window.initMapKit = function initMapKit() {
        window.__mapKitReady = true;
      };
    </script>
    <script
      src="https://cdn.apple-mapkit.com/mk/5.x.x/mapkit.core.js"
      crossorigin
      defer
      data-callback="initMapKit"
      data-libraries="map,annotations,user-location"
      data-token=""
    ></script>
    <script>
      // Inject token at runtime
      document.currentScript.previousElementSibling.setAttribute(
        "data-token",
        window.RENFO_CONFIG.MAPKIT_TOKEN,
      );
    </script>
    <script
      src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"
      defer
    ></script>
  </head>

  <body>
    <button id="expandPill" type="button" aria-label="Expand sidebar">
      <span class="icon" aria-hidden="true">
        <i data-lucide="panel-left-open"></i>
      </span>
    </button>

    <div id="sidebar">
      <div id="sidebarHeader">
        <div id="sidebarGrabber" aria-hidden="true"></div>
        <div id="brandRow">
          <div id="brandLeft">
            <img
              id="brandLogo"
              src="/assets/images/renfo-logo.png"
              alt=""
              aria-hidden="true"
            />

            <div id="brandTitle">
              <h1>Renfo</h1>
            </div>
          </div>

          <div id="headerActions">
            <button
              id="optionsBtn"
              type="button"
              class="iconButton"
              aria-label="Display grouping and sorting options"
              title="Options"
            >
              <span class="icon" aria-hidden="true">
                <i data-lucide="more-horizontal"></i>
              </span>
            </button>

            <button
              id="collapseBtn"
              class="iconButton"
              aria-label="Collapse sidebar"
              title="Collapse"
            >
              <span class="icon" aria-hidden="true">
                <i data-lucide="panel-left-close"></i>
              </span>
            </button>
          </div>
        </div>

        <div id="optionsMenu" hidden>
          <button
            id="groupMenuRow"
            class="optionsRow"
            type="button"
            aria-label="Group by setting"
            aria-expanded="false"
          >
            <span class="optionsIcon" aria-hidden="true">
              <i data-lucide="layout-list"></i>
            </span>
            <span class="optionsText">
              <p class="optionsTitle">Group By</p>
              <p id="groupSummary" class="optionsValue">None</p>
            </span>
            <span class="optionsChevron" aria-hidden="true">
              <i data-lucide="chevron-right"></i>
            </span>
          </button>
          <div id="groupChoices" class="optionsChoices" hidden>
            <button
              type="button"
              class="optionChoice"
              data-select="group"
              data-value="none"
            >
              None
            </button>
            <button
              type="button"
              class="optionChoice"
              data-select="group"
              data-value="state"
            >
              State
            </button>
            <button
              type="button"
              class="optionChoice"
              data-select="group"
              data-value="status"
            >
              Status
            </button>
          </div>

          <button
            id="sortMenuRow"
            class="optionsRow"
            type="button"
            aria-label="Sort by setting"
            aria-expanded="false"
          >
            <span class="optionsIcon" aria-hidden="true">
              <i data-lucide="arrow-up-down"></i>
            </span>
            <span class="optionsText">
              <p class="optionsTitle">Sort By</p>
              <p id="sortSummary" class="optionsValue">Name</p>
            </span>
            <span class="optionsChevron" aria-hidden="true">
              <i data-lucide="chevron-right"></i>
            </span>
          </button>
          <div id="sortChoices" class="optionsChoices" hidden>
            <button
              type="button"
              class="optionChoice"
              data-select="sort"
              data-value="name"
            >
              Name
            </button>
            <button
              type="button"
              class="optionChoice"
              data-select="sort"
              data-value="startDate"
            >
              Start Date
            </button>
          </div>

          <div class="optionsChoices">
            <button
              id="daysUntilToggleRow"
              class="optionsRow"
              type="button"
              aria-label="Toggle upcoming days in list"
            >
              <span
                id="daysUntilToggleIcon"
                class="optionsIcon"
                aria-hidden="true"
              >
                <i data-lucide="eye"></i>
              </span>
              <span class="optionsText">
                <p id="daysUntilToggleTitle" class="optionsTitle">
                  Hide Indicator
                </p>
              </span>
            </button>
          </div>
        </div>

        <div id="searchWrap">
          <span id="searchIcon" aria-hidden="true">
            <i data-lucide="search"></i>
          </span>
          <input
            id="search"
            type="search"
            placeholder="Search"
            autocomplete="off"
          />
          <button
            id="searchClearBtn"
            type="button"
            aria-label="Clear search"
            title="Clear search"
            hidden
          >
            <i data-lucide="x" aria-hidden="true"></i>
          </button>
        </div>

        <div id="controlsRow" hidden>
          <div class="selectWrap">
            <div class="label">Group</div>
            <select id="groupSelect">
              <option value="none" selected>None</option>
              <option value="state">State</option>
              <option value="status">Status</option>
            </select>
          </div>

          <div class="selectWrap">
            <div class="label">Sort</div>
            <select id="sortSelect">
              <option value="name" selected>Name</option>
              <option value="startDate">Start Date</option>
            </select>
          </div>
        </div>
      </div>

      <div id="list"></div>
    </div>

    <div id="detailSidebar" hidden>
      <div id="detailHeader">
        <button
          id="detailCloseBtn"
          type="button"
          class="iconButton"
          aria-label="Close festival details"
          title="Close details"
        >
          <span class="icon" aria-hidden="true">
            <i data-lucide="x"></i>
          </span>
        </button>
      </div>
      <div id="detailBody">
        <section id="detailHero">
          <div id="detailHeroLogoWrap">
            <img
              id="detailHeroLogo"
              src="/assets/images/renfo-logo.png"
              alt=""
              aria-hidden="true"
            />
          </div>
          <p id="detailTitle"></p>
        </section>

        <section id="detailActions">
          <a
            id="detailActionDirections"
            class="detailAction"
            href="#"
            aria-label="Get directions"
          >
            <span class="detailActionIcon" aria-hidden="true">
              <i data-lucide="navigation"></i>
            </span>
            <span class="detailActionLabel">Directions</span>
          </a>
          <a
            id="detailActionCall"
            class="detailAction"
            href="#"
            aria-label="Call festival"
          >
            <span class="detailActionIcon" aria-hidden="true">
              <i data-lucide="phone"></i>
            </span>
            <span class="detailActionLabel">Call</span>
          </a>
          <a
            id="detailActionWebsite"
            class="detailAction"
            href="#"
            aria-label="Open website"
          >
            <span class="detailActionIcon" aria-hidden="true">
              <i data-lucide="compass"></i>
            </span>
            <span class="detailActionLabel">Website</span>
          </a>
        </section>

        <section id="detailMetaRow" class="detailCard">
          <div id="detailMetaStatusItem" class="detailMetaItem">
            <p class="detailMetaLabel">Status</p>
            <p id="detailMetaStatusValue" class="detailMetaValue"></p>
          </div>
          <div id="detailMetaEstablishedItem" class="detailMetaItem">
            <p class="detailMetaLabel">Established</p>
            <p id="detailMetaEstablishedValue" class="detailMetaValue"></p>
          </div>
        </section>

        <section id="detailInfoCard" class="detailCard">
          <div class="detailInfoRow">
            <span class="detailInfoKey" aria-hidden="true" title="Dates">
              <i data-lucide="calendar-days"></i>
            </span>
            <span id="detailDateValue" class="detailInfoValue"></span>
          </div>
          <div class="detailInfoRow">
            <span class="detailInfoKey" aria-hidden="true" title="Hours">
              <i data-lucide="clock-3"></i>
            </span>
            <span id="detailTimeValue" class="detailInfoValue"></span>
          </div>
          <div id="detailAttendanceRow" class="detailInfoRow">
            <span class="detailInfoKey" aria-hidden="true" title="Attendance">
              <i data-lucide="users"></i>
            </span>
            <span id="detailAttendanceValue" class="detailInfoValue"></span>
          </div>
        </section>

        <div id="detailWeatherCard" hidden>
          <p class="sectionHeader detailSectionHeader">Forecast</p>
          <section class="detailCard detailWeatherPanel">
            <p id="detailWeatherStatus"></p>
            <div id="detailWeatherRows"></div>
          </section>
        </div>

        <div id="detailAddressCard">
          <section class="detailCard detailAddressPanel">
            <div class="detailAddressText">
              <p id="detailAddressLine1" class="detailAddressLine"></p>
              <p id="detailAddressLine2" class="detailAddressLine"></p>
              <p id="detailAddressLine3" class="detailAddressLine"></p>
            </div>
            <a
              id="detailAddressOpenBtn"
              class="iconButton detailAddressBtn"
              href="#"
              aria-label="Open address in maps"
              title="Open in maps"
            >
              <span class="icon" aria-hidden="true">
                <i data-lucide="corner-up-right"></i>
              </span>
            </a>
          </section>
        </div>

        <div id="detailResourcesCard" hidden>
          <p class="sectionHeader detailSectionHeader">Resources</p>
          <section class="detailCard detailResourcesPanel">
            <div id="detailResources"></div>
          </section>
        </div>

        <div id="detailDescriptionCard">
          <p class="sectionHeader detailSectionHeader">About</p>
          <section class="detailCard detailDescriptionPanel">
            <p id="detailDesc"></p>
          </section>
        </div>

        <section id="detailSocialCard" hidden>
          <div id="detailSocials"></div>
        </section>

        <p id="detailLastUpdated" hidden></p>
      </div>
    </div>

    <div id="map"></div>
    <div id="mobileMapControls" aria-label="Map controls" hidden>
      <button
        id="mobileMapStyleBtn"
        class="mobileMapControlBtn"
        type="button"
        aria-label="Toggle standard and hybrid map style"
        title="Map style"
      >
        <i data-lucide="map" aria-hidden="true"></i>
      </button>
      <button
        id="mobileUserLocationBtn"
        class="mobileMapControlBtn"
        type="button"
        aria-label="Toggle user location tracking"
        title="Location"
      >
        <i data-lucide="navigation" aria-hidden="true"></i>
      </button>
    </div>
    <div id="siteMeta" aria-label="Site info">
      <button
        id="aboutOpenBtn"
        type="button"
        class="siteMetaIconBtn"
        aria-label="Open about"
        title="About"
      >
        <span class="siteMetaInfoGlyph" aria-hidden="true">i</span>
      </button>
    </div>

    <div id="aboutModal" hidden>
      <button
        id="aboutBackdrop"
        type="button"
        aria-label="Close about dialog"
      ></button>
      <section
        id="aboutDialog"
        role="dialog"
        aria-modal="true"
        aria-labelledby="aboutTitle"
      >
        <header id="aboutHeader">
          <p id="aboutTitle">About</p>
          <button
            id="aboutCloseBtn"
            type="button"
            aria-label="Close about dialog"
            title="Close"
          >
            <i data-lucide="x" aria-hidden="true"></i>
          </button>
        </header>

        <div id="aboutBrand">
          <img
            id="aboutBrandLogo"
            src="/assets/images/renfo-logo.png"
            alt=""
            aria-hidden="true"
          />
          <p id="aboutBrandName">Renfo</p>
        </div>

        <p id="aboutDescription">
          Renfo is your ultimate companion for exploring the enchanting world of
          Renaissance Festivals, designed by a passionate fair goer just like yourself.
        </p>

        <a
          id="aboutSupportBtn"
          href="mailto:support@renfo.app"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="Contact support by email"
        >
          <span id="aboutSupportIcon" aria-hidden="true">
            <i data-lucide="message-square-more"></i>
          </span>
          <span>Contact Support</span>
        </a>

        <p id="aboutWeather">
          Weather powered by:
          <a
            href="https://weatherkit.apple.com/legal-attribution.html"
            target="_blank"
            rel="noopener noreferrer"
            >Apple Weather</a
          >
        </p>
        <p id="aboutLegal">
          &copy; <span class="siteYear"></span> Renfo. All rights reserved.
        </p>
      </section>
    </div>

    <script type="module" src="/src/main.js"></script>
    <script
      defer
      src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015"
      integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ=="
      data-cf-beacon='{"version":"2024.11.0","token":"11660f41b0ec4495bfda86fd385e9f15","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}'
      crossorigin="anonymous"
    ></script>
  </body>
</html>
